<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>迷失岁月</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Johnson Zhang" />
  <meta name="description" content="迷失岁月" />
  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.30.2" />


<link rel="canonical" href="https://johnson9009.github.io/" />
<link href="https://johnson9009.github.io/index.xml" rel="alternate" type="application/rss+xml" title="迷失岁月" />
  <link href="https://johnson9009.github.io/index.xml" rel="feed" type="application/rss+xml" title="迷失岁月" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/even.min.css?v=2.6.4" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">

<meta property="og:title" content="迷失岁月" />
<meta property="og:description" content="迷失岁月" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://johnson9009.github.io/" />



<meta property="og:updated_time" content="2016-08-05T07:54:45&#43;00:00"/>










<meta itemprop="name" content="迷失岁月">
<meta itemprop="description" content="迷失岁月">

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="迷失岁月"/>
<meta name="twitter:description" content="迷失岁月"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">The Time When I Feel Lost ...</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">The Time When I Feel Lost ...</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          
  <section id="posts" class="posts">
    
    
    
      <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/how-debuggers-work-part-2-breakpoints/">How debuggers work: Part 2 – Breakpoints</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2016-08-05 </span>
      <div class="post-category">
          <a href="/categories/c/c&#43;&#43;/">C/C&#43;&#43;</a><a href="/categories/%E8%BD%AF%E4%BB%B6%E8%B0%83%E8%AF%95/">软件调试</a>
        </div>
      
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p align="right">
  <font color="#ff0000"><strong>Reproduce from</strong> <a title="http://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints" href="http://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints"><strong>http://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints</strong></a></font>
</p>

<p>This is the second part in a series of articles on how debuggers work. Make sure you read <a href="http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1/">the first part</a> before this one.</p>

<h5 id="in-this-part">In this part</h5>

<p>I&#8217;m going to demonstrate how breakpoints are implemented in a debugger. Breakpoints are one of the two main pillars of debugging &#8211; the other being able to inspect values in the debugged process&#8217;s memory. We&#8217;ve already seen a preview of the other pillar in part 1 of the series, but breakpoints still remain mysterious. By the end of this article, they won&#8217;t be.</p>

<h5 id="software-interrupts">Software interrupts</h5>

<p>To implement breakpoints on the x86 architecture, software interrupts (also known as &ldquo;traps&rdquo;) are used. Before we get deep into the details, I want to explain the concept of interrupts and traps in general.</p>

<p>A CPU has a single stream of execution, working through instructions one by one <a href="http://eli.thegreenplace.net/2011/01/27/how-debuggers-work-part-2-breakpoints#id7"><a href="http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1/">1</a></a>. To handle asynchronous events like IO and hardware timers, CPUs use interrupts. A hardware interrupt is usually a dedicated electrical signal to which a special &ldquo;response circuitry&rdquo; is attached. This circuitry notices an activation of the interrupt and makes the CPU stop its current execution, save its state, and jump to a predefined address where a handler routine for the interrupt is located. When the handler finishes its work, the CPU resumes execution from where it stopped.</p>

<div align="right">
  
</div>

<p>Software interrupts are similar in principle but a bit different in practice. CPUs support special instructions that allow the software to simulate an interrupt. When such an instruction is executed, the CPU treats it like an interrupt &#8211; stops its normal flow of execution, saves its state and jumps to a handler routine. Such &ldquo;traps&rdquo; allow many of the wonders of modern OSes (task scheduling, virtual memory, memory protection, debugging) to be implemented efficiently.</p>
    </div>
    <div class="read-more">
      <a href="/post/how-debuggers-work-part-2-breakpoints/" class="read-more-link">阅读更多</a>
    </div>
  </div>
</article>
    
      <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/how-debuggers-work-part-1-basics/">How debuggers work: Part 1 – Basics</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2016-08-05 </span>
      <div class="post-category">
          <a href="/categories/c/c&#43;&#43;/">C/C&#43;&#43;</a><a href="/categories/%E8%BD%AF%E4%BB%B6%E8%B0%83%E8%AF%95/">软件调试</a>
        </div>
      
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p align="right">
  <font color="#ff0000"><strong>Reproduce from</strong></font> <a title="http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1" href="http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1" target="_blank"><strong>http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1</strong></a>
</p>

<p>This is the first part in <a href="http://eli.thegreenplace.net/pages/code">a series of articles</a> on how debuggers work. I&#8217;m still not sure how many articles the series will contain and what topics it will cover, but I&#8217;m going to start with the basics.</p>

<h5 id="in-this-part">In this part</h5>

<p>I&#8217;m going to present the main building block of a debugger&#8217;s implementation on Linux &#8211; the <tt>ptrace</tt> system call. All the code in this article is developed on a 32-bit Ubuntu machine. Note that the code is very much platform specific, although porting it to other platforms shouldn&#8217;t be too difficult.</p>

<h5 id="motivation">Motivation</h5>

<p>To understand where we&#8217;re going, try to imagine what it takes for a debugger to do its work. A debugger can start some process and debug it, or attach itself to an existing process. It can single-step through the code, set breakpoints and run to them, examine variable values and stack traces. Many debuggers have advanced features such as executing expressions and calling functions in the debbugged process&#8217;s address space, and even changing the process&#8217;s code on-the-fly and watching the effects.</p>
    </div>
    <div class="read-more">
      <a href="/post/how-debuggers-work-part-1-basics/" class="read-more-link">阅读更多</a>
    </div>
  </div>
</article>
    
      <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/calling-convention-stdcall-vs-cdecl/">Calling Convention “stdcall” VS “cdecl”</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2016-07-31 </span>
      <div class="post-category">
          <a href="/categories/c/c&#43;&#43;/">C/C&#43;&#43;</a>
        </div>
      
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      <p>We know calling convention of all Windows API is stdcall, and the default calling convention of C/C++ is cdecl, but why, why Windows choose the stdcall as API’s calling convention? What&#8217;s the benefit of it?</p>

<p>I found below answer from internet.</p>

<blockquote>
<p>It was historically added. On x86 &#8211; stdcall is hardly cheaper, than cdecl:<br />
stdcall: in function &#8211; ret N (2 bytes)<br />
cdecl: in function &#8211; ret (1 byte) + everywhere where this function is caused &#8211; add sp, N (3 bytes).</p>
</blockquote>

<p>Before today, I just know the different of stdcall and cdecl, but has never think about the question &ldquo;What&#8217;s the benefit of stdcall?&ldquo;. There are many different calling conventions, consider the method of passing parameters, some calling convention do it through stack such as stdcall and cdecl when some others do it using registers such as fastcall, consider the responsibility for cleaning the arguments from the stack, in stdcall the callee should do that when in cdecl it is caller.</p>

<div align="right">
  
</div>

<p>I get a example from textbook.</p>
    </div>
    <div class="read-more">
      <a href="/post/calling-convention-stdcall-vs-cdecl/" class="read-more-link">阅读更多</a>
    </div>
  </div>
</article>
    
  </section>
  
  <nav class="pagination">
      <a class="prev" href="/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">上一页</span>
      </a>
    
      <a class="next" href="/page/3/">
        <span class="next-text">下一页</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>

        </div>
        
      </div>  
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:johnson9009@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.linkedin.com/in/qiang-zhang-b8563888" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://github.com/johnson9009" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/u/3059419823?refer_flag=1005055010_&amp;is_all=1" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://johnson9009.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    &copy; 
    
      2017-10-21 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Johnson Zhang</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.min.js?v=2.6.4"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML'></script>




</body>
</html>
